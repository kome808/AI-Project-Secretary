# LINE Bot æ•´åˆè¦åŠƒ

> **å»ºç«‹æ—¥æœŸ**ï¼š2026-01-10  
> **ç‹€æ…‹**ï¼šå¯è¡Œæ€§è©•ä¼°  
> **æ›´æ–°**ï¼š2026-01-10 æ”¹ç”¨å‘½ä»¤é©…å‹•æ¨¡å¼

---

## è¨­è¨ˆç†å¿µ

æ¡ç”¨ã€Œ**å‘½ä»¤é©…å‹•**ã€æ¨¡å¼ï¼Œå°±åƒè€é—†æŒ‡æ®ç§˜æ›¸ä¸€æ¨£ï¼š

```
âœ… å‘½ä»¤é©…å‹•ï¼ˆæ¡ç”¨ï¼‰           âŒ è‡ªå‹•åˆ†æï¼ˆä¸æ¡ç”¨ï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ æ˜ç¢ºå‘¼å«æ‰å‹•ä½œ              â€¢ æ‰€æœ‰è¨Šæ¯éƒ½åˆ†æ
â€¢ é›¶èª¤åˆ¤é¢¨éšª                  â€¢ å®¹æ˜“èª¤åˆ¤é–’èŠ
â€¢ çœ API è²»ç”¨                 â€¢ æ¯å‰‡éƒ½è¦åˆ†æ
â€¢ å³æ™‚ç¢ºèªå›é¥‹                â€¢ ç„¡æ„Ÿè¢«å‹•é‹ä½œ
```

---

## åŠŸèƒ½ç›®æ¨™

### 1. å‘½ä»¤å»ºç«‹ä»»å‹™

```
æˆå“¡A: æ˜å¤©è¦äº¤é€±å ±çµ¦å®¢æˆ¶
æˆå“¡B: å¥½çš„ï¼Œæˆ‘ä¾†è™•ç†

PM: @AIç§˜æ›¸ è¨˜ä¸‹ã€Œäº¤é€±å ±çµ¦å®¢æˆ¶ã€çµ¦ @æˆå“¡B æœŸé™æ˜å¤©
                â†“
AIç§˜æ›¸: âœ… å·²å»ºç«‹ä»»å‹™
        ğŸ“Œ äº¤é€±å ±çµ¦å®¢æˆ¶
        ğŸ‘¤ è² è²¬äººï¼šæˆå“¡B
        ğŸ“… æœŸé™ï¼š2026-01-11
```

### 2. æ¨æ’­æé†’

```
ç³»çµ±åµæ¸¬äº‹ä»¶ï¼ˆé€¾æœŸ/åˆ°æœŸæé†’ï¼‰
    â†“
Bot ç™¼é€è¨Šæ¯åˆ°ç¾¤çµ„
    â†“
ğŸ“‹ ä»Šæ—¥ä»»å‹™æé†’
âš ï¸ å³å°‡åˆ°æœŸï¼šäº¤é€±å ±ï¼ˆ@æˆå“¡Bï¼‰
```

### 3. äº’å‹•æŸ¥è©¢

```
æˆå“¡: @AIç§˜æ›¸ ä»Šå¤©æœ‰ä»€éº¼ä»»å‹™ï¼Ÿ
    â†“
Bot: æ‚¨ä»Šæ—¥æœ‰ä»¥ä¸‹ä»»å‹™...
```

---

## å‘½ä»¤æ ¼å¼è¦æ ¼

### åŸºæœ¬å‘½ä»¤

| å‘½ä»¤ | åŠŸèƒ½ | ç¯„ä¾‹ |
|------|------|------|
| `@AIç§˜æ›¸ è¨˜ä¸‹ [å…§å®¹]` | å»ºç«‹ä»»å‹™ | `@AIç§˜æ›¸ è¨˜ä¸‹ ä¿®æ”¹é¦–é è¨­è¨ˆ` |
| `@AIç§˜æ›¸ è¨˜ä¸‹ [å…§å®¹] çµ¦ @äºº` | æŒ‡æ´¾ä»»å‹™ | `@AIç§˜æ›¸ è¨˜ä¸‹ æ¸¬è©¦API çµ¦ @å°æ˜` |
| `@AIç§˜æ›¸ è¨˜ä¸‹ [å…§å®¹] æœŸé™ [æ—¥æœŸ]` | è¨­å®šæœŸé™ | `@AIç§˜æ›¸ è¨˜ä¸‹ å‡ºå ±å‘Š æœŸé™ é€±äº”` |
| `@AIç§˜æ›¸ æœƒè­° [å…§å®¹] [æ™‚é–“]` | å»ºç«‹æœƒè­° | `@AIç§˜æ›¸ æœƒè­° éœ€æ±‚è¨ªè«‡ ä¸‹é€±ä¸‰ 14:00` |
| `@AIç§˜æ›¸ å¾…ç¢ºèª [å…§å®¹]` | å¾…ç¢ºèªäº‹é … | `@AIç§˜æ›¸ å¾…ç¢ºèª å®¢æˆ¶åŒæ„å ±åƒ¹äº†å—` |

### æŸ¥è©¢å‘½ä»¤

| å‘½ä»¤ | åŠŸèƒ½ |
|------|------|
| `@AIç§˜æ›¸ ä»Šæ—¥ä»»å‹™` | é¡¯ç¤ºä»Šæ—¥ä»»å‹™æ¸…å–® |
| `@AIç§˜æ›¸ æˆ‘çš„ä»»å‹™` | é¡¯ç¤ºæŒ‡æ´¾çµ¦è‡ªå·±çš„ä»»å‹™ |
| `@AIç§˜æ›¸ å°ˆæ¡ˆé€²åº¦` | é¡¯ç¤ºå°ˆæ¡ˆé€²åº¦æ‘˜è¦ |
| `@AIç§˜æ›¸ é€¾æœŸä»»å‹™` | é¡¯ç¤ºæ‰€æœ‰é€¾æœŸä»»å‹™ |

### é€²éšå‘½ä»¤ï¼ˆPhase 2ï¼‰

| å‘½ä»¤ | åŠŸèƒ½ |
|------|------|
| `@AIç§˜æ›¸ åˆ†æä¸Šé¢çš„å°è©±` | å¾å‰ N å‰‡è¨Šæ¯æ‰¾ä»»å‹™ |
| `@AIç§˜æ›¸ é€™é€±åšäº†ä»€éº¼` | ç”¢ç”Ÿé€±é€²åº¦å ±å‘Š |
| `@AIç§˜æ›¸ æ•´ç†æ‘˜è¦` | ç”¢ç”Ÿæœƒè­°è¨˜éŒ„æ‘˜è¦ |

---

## æ¨æ’­æé†’è¨­è¨ˆ

### æé†’ç­–ç•¥ï¼ˆçœæ¨æ’­é‡ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ¨æ’­è²»ç”¨å„ªåŒ–                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç­–ç•¥ï¼šåˆä½µè¨Šæ¯ â†’ æ¸›å°‘æ¨æ’­å‰‡æ•¸ â†’ æ§åˆ¶åœ¨å…è²»é¡åº¦å…§        â”‚
â”‚                                                         â”‚
â”‚  âœ… æ¯æ—¥æ‘˜è¦ï¼ˆ2 å‰‡/ç¾¤/æ—¥ï¼‰                               â”‚
â”‚     â€¢ 09:00 ä»Šæ—¥ä»»å‹™æé†’                                â”‚
â”‚     â€¢ 17:00 æœªå®Œæˆä»»å‹™æé†’                              â”‚
â”‚                                                         â”‚
â”‚  âœ… é‡è¦ä»»å‹™å³æ™‚æ¨æ’­                                     â”‚
â”‚     â€¢ åªæœ‰æ¨™è¨˜ã€Œé‡è¦ã€çš„ä»»å‹™æ‰å³æ™‚æé†’                   â”‚
â”‚     â€¢ ä¸€èˆ¬ä»»å‹™çµ±ä¸€åœ¨æ‘˜è¦ä¸­                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¨Šæ¯æ¨¡æ¿

**æ¯æ—¥æ‘˜è¦ï¼ˆæ—©ä¸Š 09:00ï¼‰**
```
ğŸ“‹ ä»Šæ—¥ä»»å‹™æé†’ - 2026/01/10

âš ï¸ ä»Šæ—¥åˆ°æœŸï¼š
â€¢ äº¤é€±å ±çµ¦å®¢æˆ¶ï¼ˆ@å°æ˜ï¼‰
â€¢ å®Œæˆ API è¦æ ¼ï¼ˆ@å°è¯ï¼‰

ğŸ“Š çµ±è¨ˆï¼š
â€¢ é€²è¡Œä¸­ï¼š5 é …
â€¢ å¾…ç¢ºèªï¼š2 é …

ğŸ’ª åŠ æ²¹ï¼æœ‰å•é¡Œéš¨æ™‚ @AIç§˜æ›¸
```

**æœªå®Œæˆæé†’ï¼ˆä¸‹åˆ 17:00ï¼‰**
```
ğŸ”” ä¸‹ç­å‰æé†’ - 2026/01/10

âŒ ä»Šæ—¥æœªå®Œæˆï¼š
â€¢ äº¤é€±å ±çµ¦å®¢æˆ¶ï¼ˆ@å°æ˜ï¼‰

âš ï¸ æ˜æ—¥åˆ°æœŸï¼š
â€¢ æº–å‚™ç°¡å ±ï¼ˆ@å°è¯ï¼‰
â€¢ æ¸¬è©¦ç’°å¢ƒéƒ¨ç½²ï¼ˆ@å°æ˜ï¼‰

è¨˜å¾—æ›´æ–°é€²åº¦ï¼
```

**é€¾æœŸé€šçŸ¥ï¼ˆæ¯æ—¥ 10:00ï¼‰**
```
ğŸ”´ é€¾æœŸä»»å‹™æé†’

ä»¥ä¸‹ä»»å‹™å·²é€¾æœŸï¼Œè«‹ç›¡å¿«è™•ç†ï¼š

â€¢ API è¦æ ¼ç¢ºèªï¼ˆ@å°è¯ï¼‰- é€¾æœŸ 2 å¤©
â€¢ è¨­è¨ˆç¨¿äº¤ä»˜ï¼ˆ@å°æ˜ï¼‰- é€¾æœŸ 1 å¤©

è«‹æ›´æ–°ç‹€æ…‹æˆ–èª¿æ•´æœŸé™ï¼
```

**é‡è¦ä»»å‹™å³æ™‚æé†’ï¼ˆåˆ°æœŸå‰ 2 å°æ™‚ï¼‰**
```
â° é‡è¦ä»»å‹™å³å°‡åˆ°æœŸ

ğŸ“Œ å®¢æˆ¶ç°¡å ±
ğŸ‘¤ è² è²¬äººï¼š@å°æ˜
ğŸ“… æœŸé™ï¼šä»Šå¤© 14:00
ğŸ·ï¸ æ¨™è¨˜ï¼šé‡è¦

âš¡ é‚„æœ‰ 2 å°æ™‚ï¼
```

---

## æŠ€è¡“æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LINE Platform                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ç¾¤çµ„ A   â”‚    â”‚ ç¾¤çµ„ B   â”‚    â”‚     LINE Bot     â”‚  â”‚
â”‚  â”‚ (å°ˆæ¡ˆ1)  â”‚    â”‚ (å°ˆæ¡ˆ2)  â”‚    â”‚  (AI å°ˆæ¡ˆç§˜æ›¸)   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚               â”‚                    â”‚            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚               â”‚                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ Webhook
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Supabase Edge Function          â”‚
        â”‚   (Webhook Handler)               â”‚
        â”‚   - åªè™•ç† @AIç§˜æ›¸ é–‹é ­çš„è¨Šæ¯      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚                   â”‚
        â–¼               â–¼                   â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ å‘½ä»¤è§£æ â”‚   â”‚   è³‡æ–™åº«     â”‚   â”‚  æ¨æ’­è¨Šæ¯    â”‚
  â”‚ (AI/è¦å‰‡)â”‚   â”‚  (Supabase)  â”‚   â”‚  (LINE API)  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â–²
                                           â”‚
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   Cron Job å®šæ™‚è§¸ç™¼      â”‚
                              â”‚   (09:00 / 17:00 æ‘˜è¦)   â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å¯¦ä½œæ­¥é©Ÿ

### ç¬¬ä¸€æ­¥ï¼šå»ºç«‹ LINE Bot

1. å‰å¾€ [LINE Developers Console](https://developers.line.biz/)
2. å»ºç«‹ Providerï¼ˆè‹¥æ²’æœ‰ï¼‰
3. å»ºç«‹ Messaging API Channel
4. å–å¾—ï¼š
   - **Channel ID**
   - **Channel Secret**
   - **Channel Access Token**ï¼ˆé•·æœŸï¼‰

### ç¬¬äºŒæ­¥ï¼šBot è¨­å®š

åœ¨ LINE Developers Console è¨­å®šï¼š

| è¨­å®šé …ç›® | å€¼ |
|----------|-----|
| å…è¨±åŠ å…¥ç¾¤çµ„ | âœ… é–‹å•Ÿ |
| ç¾¤çµ„/èŠå¤©å®¤è¨Šæ¯ | âœ… æ¥æ”¶ |
| Webhook URL | `https://your-project.supabase.co/functions/v1/line-webhook` |
| ä½¿ç”¨ Webhook | âœ… é–‹å•Ÿ |
| è‡ªå‹•å›è¦† | âŒ é—œé–‰ |
| åŠ å…¥å¥½å‹å•å€™ | å¯è‡ªè¨‚ |

### ç¬¬ä¸‰æ­¥ï¼šå»ºç«‹ Webhook Edge Function

```typescript
// supabase/functions/line-webhook/index.ts

import { serve } from "https://deno.land/std@0.168.0/http/server.ts"

const LINE_CHANNEL_SECRET = Deno.env.get('LINE_CHANNEL_SECRET')
const LINE_CHANNEL_ACCESS_TOKEN = Deno.env.get('LINE_CHANNEL_ACCESS_TOKEN')
const BOT_NAME = '@AIç§˜æ›¸'

serve(async (req) => {
  // 1. é©—è­‰ç°½å
  const signature = req.headers.get('x-line-signature')
  // ... é©—è­‰é‚è¼¯
  
  // 2. è§£æäº‹ä»¶
  const body = await req.json()
  
  for (const event of body.events) {
    if (event.type === 'message' && event.message.type === 'text') {
      const text = event.message.text
      
      // 3. åªè™•ç† @AIç§˜æ›¸ é–‹é ­çš„è¨Šæ¯ï¼ˆå‘½ä»¤é©…å‹•ï¼‰
      if (!text.startsWith(BOT_NAME)) {
        continue  // å¿½ç•¥ä¸€èˆ¬è¨Šæ¯ï¼Œä¸æµªè²» API
      }
      
      const groupId = event.source.groupId
      const userId = event.source.userId
      const command = text.replace(BOT_NAME, '').trim()
      
      // 4. è§£æå‘½ä»¤
      const result = await parseCommand(command, groupId, userId)
      
      // 5. å›è¦†çµæœ
      await replyMessage(event.replyToken, result.message)
    }
  }
  
  return new Response('OK', { status: 200 })
})

// å‘½ä»¤è§£æ
async function parseCommand(command: string, groupId: string, userId: string) {
  // è¨˜ä¸‹ä»»å‹™
  if (command.startsWith('è¨˜ä¸‹')) {
    return await handleCreateTask(command, groupId, userId)
  }
  
  // æŸ¥è©¢ä»»å‹™
  if (command.includes('ä»Šæ—¥ä»»å‹™')) {
    return await handleTodayTasks(groupId, userId)
  }
  
  if (command.includes('æˆ‘çš„ä»»å‹™')) {
    return await handleMyTasks(groupId, userId)
  }
  
  // æœªçŸ¥å‘½ä»¤
  return {
    message: `â“ ä¸èªè­˜é€™å€‹å‘½ä»¤\n\nå¯ç”¨å‘½ä»¤ï¼š\nâ€¢ è¨˜ä¸‹ [å…§å®¹]\nâ€¢ ä»Šæ—¥ä»»å‹™\nâ€¢ æˆ‘çš„ä»»å‹™\nâ€¢ å°ˆæ¡ˆé€²åº¦`
  }
}

// å»ºç«‹ä»»å‹™
async function handleCreateTask(command: string, groupId: string, userId: string) {
  // è§£æï¼šè¨˜ä¸‹ [å…§å®¹] çµ¦ @äºº æœŸé™ [æ—¥æœŸ]
  const content = command.replace('è¨˜ä¸‹', '').trim()
  
  // ä½¿ç”¨ AI æå–ä»»å‹™è³‡è¨Š
  const taskInfo = await extractTaskInfo(content)
  
  // å»ºç«‹ä»»å‹™
  const { data, error } = await supabase
    .from('tasks')
    .insert({
      title: taskInfo.title,
      due_date: taskInfo.dueDate,
      assignee_line_id: taskInfo.assignee,
      source: 'line',
      line_group_id: groupId,
      created_by_line_id: userId
    })
  
  if (error) {
    return { message: 'âŒ å»ºç«‹å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦' }
  }
  
  return {
    message: `âœ… å·²å»ºç«‹ä»»å‹™\nğŸ“Œ ${taskInfo.title}${taskInfo.assignee ? `\nğŸ‘¤ è² è²¬äººï¼š${taskInfo.assignee}` : ''}${taskInfo.dueDate ? `\nğŸ“… æœŸé™ï¼š${taskInfo.dueDate}` : ''}`
  }
}

// å›è¦†è¨Šæ¯ï¼ˆå…è²»ï¼‰
async function replyMessage(replyToken: string, text: string) {
  await fetch('https://api.line.me/v2/bot/message/reply', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${LINE_CHANNEL_ACCESS_TOKEN}`,
    },
    body: JSON.stringify({
      replyToken,
      messages: [{ type: 'text', text }]
    })
  })
}
```

### ç¬¬å››æ­¥ï¼šå»ºç«‹æé†’æ’ç¨‹ Edge Function

```typescript
// supabase/functions/line-reminder/index.ts
// é€é Supabase Cron æ¯æ—¥ 09:00 / 17:00 å‘¼å«

import { createClient } from '@supabase/supabase-js'

const supabase = createClient(
  Deno.env.get('SUPABASE_URL')!,
  Deno.env.get('SUPABASE_SERVICE_ROLE_KEY')!
)

serve(async (req) => {
  const { type } = await req.json() // 'morning' | 'evening'
  
  // 1. å–å¾—æ‰€æœ‰æ´»èºçš„ç¾¤çµ„
  const { data: groups } = await supabase
    .from('line_group_mappings')
    .select('line_group_id, project_id')
    .eq('is_active', true)
  
  for (const group of groups) {
    // 2. æŸ¥è©¢è©²å°ˆæ¡ˆçš„ä»»å‹™
    const { data: tasks } = await supabase
      .from('tasks')
      .select('*')
      .eq('project_id', group.project_id)
      .eq('status', 'in_progress')
    
    // 3. çµ„è£è¨Šæ¯
    const message = formatDailySummary(tasks, type)
    
    // 4. æ¨æ’­åˆ°ç¾¤çµ„
    if (message) {
      await pushToGroup(group.line_group_id, message)
    }
  }
  
  return new Response('OK', { status: 200 })
})

// æ¨æ’­è¨Šæ¯ï¼ˆè¨ˆè²»ï¼‰
async function pushToGroup(groupId: string, message: string) {
  await fetch('https://api.line.me/v2/bot/message/push', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${LINE_CHANNEL_ACCESS_TOKEN}`,
    },
    body: JSON.stringify({
      to: groupId,
      messages: [{ type: 'text', text: message }]
    })
  })
}
```

### ç¬¬äº”æ­¥ï¼šç¾¤çµ„èˆ‡å°ˆæ¡ˆå°æ‡‰

```sql
-- æ–°å¢è³‡æ–™è¡¨
CREATE TABLE aiproject.line_group_mappings (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  line_group_id TEXT NOT NULL UNIQUE,
  project_id UUID REFERENCES aiproject.projects(id),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  is_active BOOLEAN DEFAULT true
);

-- LINE ä½¿ç”¨è€…å°æ‡‰ï¼ˆé¸ç”¨ï¼‰
CREATE TABLE aiproject.line_user_mappings (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  line_user_id TEXT NOT NULL UNIQUE,
  user_id UUID REFERENCES auth.users(id),
  display_name TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

---

## è²»ç”¨ä¼°ç®—

### LINE Messaging API

| æ–¹æ¡ˆ | å…è²»æ¨æ’­ | æœˆè²» | é©ç”¨å ´æ™¯ |
|------|----------|------|----------|
| **Free** | 500 å‰‡/æœˆ | å…è²» | å°åœ˜éšŠï¼ˆ<5äººï¼‰ |
| **Light** | 5,000 å‰‡/æœˆ | NT$800 | ä¸­å‹åœ˜éšŠ |
| **Standard** | +åŠ è³¼ | NT$1,200èµ· | å¤§é‡é€šçŸ¥ |

### è²»ç”¨è¨ˆç®—ç¯„ä¾‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‡è¨­ï¼š1 å€‹å°ˆæ¡ˆç¾¤çµ„ã€22 å€‹å·¥ä½œæ—¥                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ¯æ—¥æ‘˜è¦ Ã— 2 æ¬¡ Ã— 22 æ—¥ = 44 å‰‡/æœˆ                       â”‚
â”‚ é€¾æœŸé€šçŸ¥ï¼ˆå‡è¨­æ¯é€± 2 å‰‡ï¼‰ = 8 å‰‡/æœˆ                       â”‚
â”‚ é‡è¦ä»»å‹™å³æ™‚æé†’ï¼ˆå‡è¨­æ¯é€± 3 å‰‡ï¼‰ = 12 å‰‡/æœˆ              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç¸½è¨ˆï¼šç´„ 64 å‰‡/æœˆ/ç¾¤çµ„                                   â”‚
â”‚ 7 å€‹ç¾¤çµ„å…§éƒ½å¯ä»¥ç¶­æŒåœ¨å…è²»é¡åº¦ï¼âœ…                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¨Šæ¯é¡å‹è²»ç”¨

| åŠŸèƒ½ | æ–¹å‘ | è²»ç”¨ | èªªæ˜ |
|------|------|------|------|
| **æ¥æ”¶å‘½ä»¤** | æˆå“¡ â†’ Bot | å…è²» | æ¥æ”¶è¨Šæ¯ä¸è¨ˆè²» |
| **ç¢ºèªå›è¦†** | Bot â†’ æˆå“¡ | å…è²» | Reply ä¸è¨ˆè²» |
| **æ¯æ—¥æ‘˜è¦** | Bot â†’ ç¾¤çµ„ | **è¨ˆè²»** | æ¯æ—¥ 2 å‰‡ |
| **å³æ™‚æé†’** | Bot â†’ ç¾¤çµ„ | **è¨ˆè²»** | é‡è¦ä»»å‹™æ‰æ¨ |

### AI API

```
å‘½ä»¤é©…å‹•æ¨¡å¼è¶…çœï¼š
â€¢ åªæœ‰ @AIç§˜æ›¸ çš„è¨Šæ¯æ‰åˆ†æ
â€¢ æ¯å‰‡å‘½ä»¤ç´„ 100-200 tokens
â€¢ GPT-4o-mini ç´„ $0.0001/å‰‡
â€¢ æ¯æœˆ 100 å‰‡å‘½ä»¤ â‰ˆ $0.01 âœ…
```

---

## ä½¿ç”¨æµç¨‹

### è¨­å®šéšæ®µ

```
1. PM å»ºç«‹ LINE Botï¼ˆä¸€æ¬¡æ€§ï¼‰
2. PM é‚€è«‹ Bot åˆ°å°ˆæ¡ˆç¾¤çµ„
3. åœ¨ç³»çµ±ä¸­ç¶å®šç¾¤çµ„ â†’ å°ˆæ¡ˆ
4. é–‹å§‹ä½¿ç”¨å‘½ä»¤
```

### æ—¥å¸¸ä½¿ç”¨

```
æˆå“¡åœ¨ç¾¤çµ„è¨è«–
    â†“
ç™¼ç¾éœ€è¦è¨˜éŒ„çš„äº‹é …
    â†“
PM: @AIç§˜æ›¸ è¨˜ä¸‹ã€Œxxxã€çµ¦ @èª° æœŸé™ xxx
    â†“
AIç§˜æ›¸: âœ… å·²å»ºç«‹ä»»å‹™...
    â†“
ä»»å‹™é€²å…¥ç³»çµ±ï¼ŒPM å¯åœ¨ç¶²é ç®¡ç†
```

---

## éŒ¯èª¤è™•ç†

### å‘½ä»¤æ ¼å¼éŒ¯èª¤

```
ä½¿ç”¨è€…: @AIç§˜æ›¸ å¹«æˆ‘åšä¸€å€‹ç¶²ç«™

AIç§˜æ›¸: â“ é€™å€‹å‘½ä»¤æˆ‘ä¸å¤ªç†è§£

ğŸ’¡ è©¦è©¦é€™æ¨£èªªï¼š
â€¢ @AIç§˜æ›¸ è¨˜ä¸‹ åšä¸€å€‹ç¶²ç«™
â€¢ @AIç§˜æ›¸ è¨˜ä¸‹ åšç¶²ç«™ çµ¦ @å°æ˜ æœŸé™ä¸‹é€±äº”

å¯ç”¨å‘½ä»¤ï¼šè¨˜ä¸‹ã€æœƒè­°ã€å¾…ç¢ºèªã€ä»Šæ—¥ä»»å‹™ã€æˆ‘çš„ä»»å‹™
```

### æœªç¶å®šç¾¤çµ„

```
ä½¿ç”¨è€…: @AIç§˜æ›¸ è¨˜ä¸‹ æ¸¬è©¦ä»»å‹™

AIç§˜æ›¸: âš ï¸ é€™å€‹ç¾¤çµ„å°šæœªç¶å®šå°ˆæ¡ˆ

è«‹è¯ç¹« PM åœ¨ç³»çµ±ä¸­è¨­å®šç¾¤çµ„å°æ‡‰ã€‚
```

---

## å®‰å…¨è€ƒé‡

1. **Webhook é©—è­‰**ï¼šé©—è­‰ `x-line-signature` ç¢ºä¿ä¾†æº
2. **ç¾¤çµ„æ¬Šé™**ï¼šåªè™•ç†å·²ç¶å®šçš„ç¾¤çµ„
3. **æ•æ„Ÿè³‡è¨Š**ï¼šä¸åœ¨ç¾¤çµ„å…¬é–‹é¡¯ç¤ºè©³ç´°å…§å®¹
4. **API Token**ï¼šå­˜æ”¾æ–¼ Supabase Secrets

---

## é–‹ç™¼æ™‚ç¨‹ä¼°ç®—

| é …ç›® | æ™‚é–“ |
|------|------|
| LINE Bot è¨­å®š | 1 å°æ™‚ |
| Webhook Edge Functionï¼ˆå‘½ä»¤è§£æï¼‰ | 4 å°æ™‚ |
| å‘½ä»¤è§£æé‚è¼¯ï¼ˆAI + è¦å‰‡ï¼‰ | 3 å°æ™‚ |
| ç¾¤çµ„-å°ˆæ¡ˆå°æ‡‰æ©Ÿåˆ¶ | 2 å°æ™‚ |
| æ¨æ’­æé†’æ’ç¨‹ | 3 å°æ™‚ |
| è¨Šæ¯æ¨¡æ¿ | 1 å°æ™‚ |
| éŒ¯èª¤è™•ç† | 1 å°æ™‚ |
| æ¸¬è©¦èˆ‡èª¿æ•´ | 3 å°æ™‚ |
| **ç¸½è¨ˆ** | **ç´„ 18 å°æ™‚** |

---

## é–‹ç™¼å„ªå…ˆé †åº

### Phase 1ï¼šåŸºæœ¬åŠŸèƒ½ï¼ˆMVPï¼‰
- [x] LINE Bot å»ºç«‹
- [ ] Webhook æ¥æ”¶ï¼ˆå‘½ä»¤é©…å‹•ï¼‰
- [ ] `@AIç§˜æ›¸ è¨˜ä¸‹` å‘½ä»¤
- [ ] ç¾¤çµ„-å°ˆæ¡ˆå°æ‡‰

### Phase 2ï¼šæŸ¥è©¢åŠŸèƒ½
- [ ] `@AIç§˜æ›¸ ä»Šæ—¥ä»»å‹™` 
- [ ] `@AIç§˜æ›¸ æˆ‘çš„ä»»å‹™`
- [ ] `@AIç§˜æ›¸ å°ˆæ¡ˆé€²åº¦`

### Phase 3ï¼šæ¨æ’­æé†’
- [ ] æ¯æ—¥æ‘˜è¦ï¼ˆ09:00 / 17:00ï¼‰
- [ ] é€¾æœŸä»»å‹™é€šçŸ¥
- [ ] é‡è¦ä»»å‹™å³æ™‚æé†’

### Phase 4ï¼šé€²éšåŠŸèƒ½
- [ ] `@AIç§˜æ›¸ åˆ†æä¸Šé¢çš„å°è©±`
- [ ] `@AIç§˜æ›¸ é€™é€±åšäº†ä»€éº¼`
- [ ] èªéŸ³è¨Šæ¯è½‰æ–‡å­—

---

## çµè«–

| é …ç›® | è©•ä¼° |
|------|------|
| æŠ€è¡“å¯è¡Œæ€§ | âœ… å®Œå…¨å¯è¡Œ |
| è²»ç”¨æ§åˆ¶ | âœ… å…è²»æ–¹æ¡ˆå¯ç”¨ |
| èª¤åˆ¤é¢¨éšª | âœ… å‘½ä»¤é©…å‹•é›¶èª¤åˆ¤ |
| ä½¿ç”¨é«”é©— | âœ… ç›´è¦ºåƒç”¨ç§˜æ›¸ |
| é–‹ç™¼æˆæœ¬ | âš ï¸ ç´„ 18 å°æ™‚ |

---

**ä¸‹ä¸€æ­¥**ï¼šç¢ºèªæ˜¯å¦é–‹å§‹é–‹ç™¼ï¼Œéœ€å…ˆç”³è«‹ LINE Developers å¸³è™Ÿã€‚
