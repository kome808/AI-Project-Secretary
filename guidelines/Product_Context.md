# AI 對話式專案助理平台｜Product Context（核心版）

> 本文件是系統唯一真相（Single Source of Truth）。
> 開發 AI 每次先讀本文件，再讀 docs/plan/[模組].md。
> 目標：打造「虛擬專案秘書」，避免變成傳統複雜專案管理系統。

---

## 1. 產品定位

### 1.1 一句話
用對話＋AI 把會議/LINE/Email/文件等碎片，落地成可追蹤的【專案工作/任務/待回覆/決議/變更】，並主動提醒。

### 1.2 核心差異
- **先進收件匣再入庫**：AI 只能提出建議，所有新增/更新都先進 Inbox，人工 Confirm/Edit/Reject 才入庫。
- **證據鏈 Citation**：每個可追蹤項目都必須回溯到來源 Artifact。
- **對話驅動、少入口**：左側只保留 5 個入口，其他都以「任務清單視圖」呈現。
- **成本可控**：預設不是一直聊天；晨間簡報以「秘書報告卡」為主，需要追問才進入對話。

---

## 2. 左側資訊架構（5 入口）

1) 儀表板（Dashboard）
2) 收件匣（Inbox）
3) 任務清單（Tasks）
4) 文件庫（Sources / Artifacts）
5) 設定（Settings）
   - 專案設定（PM）
   - 系統設定（Admin Only）
   - 成員管理（通常在專案設定內）

---

## 3. 唯一主流程（所有輸入都走同一路）

1) 輸入：貼上文字 / 上傳檔案 / 連結（會議逐字稿、LINE/Email 文字、規格、圖檔、Excel…）
2) 生成：AI 產生「建議卡」（Suggestion Cards）
3) 收件匣：使用者 Confirm / Edit / Reject
4) 入庫：入庫後成為可追蹤項目（任務、待回覆、決議、變更、專案工作…）
5) 追蹤：在「任務清單」用視圖（Tabs/Filters）管理
6) 提醒：儀表板晨間簡報＋需要你處理（逾期/卡關/待回覆）

---

## 4. 名詞定義（務必一致）

### 4.1 Artifact（來源）
任何貼上/上傳/連結的內容都是 Artifact。
- 原則：內容不可被修改（可改顯示名稱/標籤），維持證據真實性
- 用途：所有追蹤項目都必須引用至少一個 Artifact（Citation）

### 4.2 專案工作（Project Work）
「交付骨架/工作包」：專案要完成的工作單元，包含但不限於：
- 功能模組/頁面
- 交付文件（規格書、測試報告、上架文件…）
- 會議/訪談/驗收
- 外部依賴（授權、VPN、API、第三方回覆）

特性：
- 主要由 PM 建立與指派，但其他成員也可建立/指派
- 專案工作本身不是「個人待辦」；指派後才會轉成個人/團隊可執行的「任務」

### 4.3 任務（Task）
「被指派的執行項」：出現在任務清單（我的任務/團隊任務）。
可包含一般待辦、待回覆追蹤、變更處理、實作子任務等。

### 4.4 Pending（待回覆）
等待外部/內部回覆的追蹤項，可指派「追蹤負責人」，具有等待天數與逾期提示。

### 4.5 Decision（決議）
已確認的事實/規則（Single Source of Truth），必須能回溯 Citation。

### 4.6 CR（Change Request 需求變更）
變更需求從提出→審核→核准/駁回→實作的追蹤項，必須可溯源、可標風險。

---

## 5. 任務清單（Tasks）＝單一工作入口（多視圖）

任務清單內用 Tabs/Filters 呈現不同視圖：
- 待辦（Actions）
- 待回覆（Pending）
- 決議（Decisions）
- 需求變更（CR）
- 專案工作（Project Work）
- 執行地圖（Map，可選：基於專案工作）

### 5.1 預設頁規則（依角色）
- 一般成員：預設進入「我的任務（A）」
- PM：預設進入「專案工作（B）」
- 同一人多角色：在該專案以 PM 身分進入時套用 B
- 允許每個專案記住使用者最後停留視圖（覆蓋預設）

---

## 6. AI 助理如何驅動系統（Intent Routing）

### 6.1 原則
- AI 只做「意圖判斷＋建議產生＋必要追問」，不直接寫入最終資料
- 所有新增/更新 → 先進 Inbox → 人工確認
- 上下文最小化：只提供「當前專案＋成員＋必要相關來源/項目」

### 6.2 AI 必須輸出的結構（產品層要求）
AI 回覆需包含：
- 意圖類型：整理成建議 / 查詢 / 更新提案 / 關聯提案
- 建議清單：每筆含類型、標題、摘要、建議負責人/期限（若能推論）、Citation
- 若資訊不足：列出 1～3 個追問（如：要掛哪個專案工作？期限？指派誰？）

---

## 7. RAG 搜尋（Project Memory Search）

### 定位
讓使用者用自然語言查回「專案記憶」，並能回到 Citation 與關聯項目。

### 入口
全站單一入口：儀表板頂部或任務清單頂部的搜尋列。

### 模式
- 找資料（Search）：回傳來源片段＋關聯項目（優先）
- 問答案（Answer）：摘要結論（必附 Citation，可點回 Artifact）

---

## 8. 設定（Settings）權限分離

### 8.1 系統設定（Admin Only）
僅系統管理員可見：
- AI 供應商/模型、API Key（僅存後端並加密）
- 儲存模式（Local / Supabase）
- 全域政策（遮罩/引用規則）、用量/稽核

### 8.2 專案設定（PM）
PM 可見：
- 專案基本資訊、成員邀請與角色
- 通知與提醒規則（晨間簡報頻率/渠道）
- 專案工作骨架/WBS 管理（匯入/版本）

---

## 9. 設計原則（避免 PM 工具化）
- 首屏資訊少：儀表板以「秘書簡報＋需要你處理」為主
- 所有卡片可行動：每張卡都有下一步（指派/追問/轉項目）
- Citation 明顯：列表與詳情都能一鍵回到來源
- 先跑通流程再做深整合（Gmail/LINE API 同步列為後續）
